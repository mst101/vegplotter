import{d as L,C as T,r as g,c,o as u,w as l,b as r,g as i,u as t,n as W,e as x,f as m,a as n,k as h,B as k,J,i as y,P as M,W as Y}from"./app-DmiFfQ2G.js";import{_ as G}from"./ActionMessage.vue_vue_type_script_setup_true_lang-B5pg8bzv.js";import{_ as H}from"./FormSection.vue_vue_type_script_setup_true_lang-CudrSAqz.js";import{a as P,_ as z}from"./TextInput.vue_vue_type_script_setup_true_lang-BIUT82bT.js";import{_ as b}from"./InputLabel.vue_vue_type_script_setup_true_lang-DXuMAQnB.js";import{_ as K}from"./PrimaryButton.vue_vue_type_script_setup_true_lang-BWEdho3v.js";import{_ as E}from"./SecondaryButton.vue_vue_type_script_setup_true_lang-CqX5B3hd.js";const O={key:0,class:"col-span-6 sm:col-span-4"},Q={class:"mt-2"},X=["src","alt"],Z={class:"mt-2"},ee={class:"col-span-6 sm:col-span-4"},oe={class:"col-span-6 sm:col-span-4"},se={key:1},te={class:"mt-2 text-sm"},ae={class:"mt-2 text-sm font-medium text-green-600"},fe=L({__name:"UpdateProfileInformationForm",props:{user:{}},setup(j){var C,$;const w=j,s=T({_method:"PUT",name:(C=w.user)==null?void 0:C.name,email:($=w.user)==null?void 0:$.email,photo:null}),S=g(null),d=g(null),a=g(null);function A(){a.value&&a.value.files&&(s.photo=a.value.files[0]),s.post(route("user-profile-information.update"),{errorBag:"updateProfileInformation",preserveScroll:!0,onSuccess:()=>V()})}function F(){S.value=!0}function R(){var o;(o=a.value)==null||o.click()}function q(){var f;const o=((f=a.value)==null?void 0:f.files)&&a.value.files[0];if(!o)return;const e=new FileReader;e.onload=v=>{var p;d.value=(p=v.target)==null?void 0:p.result},e.readAsDataURL(o)}function D(){Y.delete(route("current-user-photo.destroy"),{preserveScroll:!0,onSuccess:()=>{d.value=null,V()}})}function V(){var o;(o=a.value)!=null&&o.value&&(a.value.value="")}return(o,e)=>(u(),c(H,{onSubmitted:A},{title:l(()=>e[2]||(e[2]=[i(" Profile Information ")])),description:l(()=>e[3]||(e[3]=[i(" Update your account's profile information and email address. ")])),form:l(()=>{var f,v,p,I,N,B,U;return[o.$page.props.jetstream.managesProfilePhotos?(u(),x("div",O,[n("input",{id:"photo",ref_key:"photoInput",ref:a,type:"file",class:"hidden",onChange:q},null,544),r(b,{for:"photo",value:"Photo"}),h(n("div",Q,[n("img",{src:(f=o.user)==null?void 0:f.profile_photo_url,alt:(v=o.user)==null?void 0:v.name,class:"size-20 rounded-full object-cover"},null,8,X)],512),[[k,!d.value]]),h(n("div",Z,[n("span",{class:"block size-20 rounded-full bg-cover bg-center bg-no-repeat",style:J(`background-image: url('${d.value}');`)},null,4)],512),[[k,d.value]]),r(E,{class:"me-2 mt-2",type:"button",onClick:y(R,["prevent"])},{default:l(()=>e[4]||(e[4]=[i(" Select A New Photo ")])),_:1}),(p=o.user)!=null&&p.profile_photo_path?(u(),c(E,{key:0,type:"button",class:"mt-2",onClick:y(D,["prevent"])},{default:l(()=>e[5]||(e[5]=[i(" Remove Photo ")])),_:1})):m("",!0),(I=t(s).errors)!=null&&I.photo?(u(),c(P,{key:1,message:t(s).errors.photo,class:"mt-2"},null,8,["message"])):m("",!0)])):m("",!0),n("div",ee,[r(b,{for:"name",value:"Name"}),r(z,{id:"name",modelValue:t(s).name,"onUpdate:modelValue":e[0]||(e[0]=_=>t(s).name=_),type:"text",class:"mt-1 block w-full",required:"",autocomplete:"name"},null,8,["modelValue"]),(N=t(s).errors)!=null&&N.name?(u(),c(P,{key:0,message:t(s).errors.name,class:"mt-2"},null,8,["message"])):m("",!0)]),n("div",oe,[r(b,{for:"email",value:"Email"}),r(z,{id:"email",modelValue:t(s).email,"onUpdate:modelValue":e[1]||(e[1]=_=>t(s).email=_),type:"email",class:"mt-1 block w-full",required:"",autocomplete:"username"},null,8,["modelValue"]),(B=t(s).errors)!=null&&B.email?(u(),c(P,{key:0,message:t(s).errors.email,class:"mt-2"},null,8,["message"])):m("",!0),o.$page.props.jetstream.hasEmailVerification&&((U=o.user)==null?void 0:U.email_verified_at)===null?(u(),x("div",se,[n("p",te,[e[7]||(e[7]=i(" Your email address is unverified. ")),r(t(M),{href:o.route("verification.send"),method:"post",as:"button",class:"rounded-md text-sm text-gray-600 underline hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2",onClick:y(F,["prevent"])},{default:l(()=>e[6]||(e[6]=[i(" Click here to re-send the verification email. ")])),_:1},8,["href"])]),h(n("div",ae," A new verification link has been sent to your email address. ",512),[[k,S.value]])])):m("",!0)])]}),actions:l(()=>[r(G,{on:t(s).recentlySuccessful,class:"me-3"},{default:l(()=>e[8]||(e[8]=[i(" Saved. ")])),_:1},8,["on"]),r(K,{type:"submit",class:W({"opacity-25":t(s).processing}),disabled:t(s).processing},{default:l(()=>e[9]||(e[9]=[i(" Save ")])),_:1},8,["class","disabled"])]),_:1}))}});export{fe as _};
