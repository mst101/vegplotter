import{d as k,j as g,q as y,c as p,o as s,w as _,b as w,r as V,f as q,e as I,F as T,h as B}from"./app-DmiFfQ2G.js";const a=[];for(let e=0;e<256;++e)a.push((e+256).toString(16).slice(1));function E(e,t=0){return(a[e[t+0]]+a[e[t+1]]+a[e[t+2]]+a[e[t+3]]+"-"+a[e[t+4]]+a[e[t+5]]+"-"+a[e[t+6]]+a[e[t+7]]+"-"+a[e[t+8]]+a[e[t+9]]+"-"+a[e[t+10]]+a[e[t+11]]+a[e[t+12]]+a[e[t+13]]+a[e[t+14]]+a[e[t+15]]).toLowerCase()}let f;const N=new Uint8Array(16);function H(){if(!f){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");f=crypto.getRandomValues.bind(crypto)}return f(N)}const P=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),b={randomUUID:P};function F(e,t,v){var l;if(b.randomUUID&&!e)return b.randomUUID();e=e||{};const r=e.random??((l=e.rng)==null?void 0:l.call(e))??H();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,E(r)}const W=k({__name:"RestaurantChair",props:{id:{type:String,required:!0},position:{type:Object,required:!0},angle:{type:Number,default:0},visible:{type:Boolean,default:!0},parentId:{type:String,required:!0}},setup(e){const t={width:60,height:60,outerWidth:60,outerHeight:60},v=g(()=>({x:t.width/2,y:t.height/2}));return(r,l)=>{const h=y("v-rect"),m=y("v-group");return s(),p(m,{x:e.position.x,y:e.position.y,rotation:e.angle,visible:e.visible,offset:v.value},{default:_(()=>[w(h,{width:t.width,height:t.height,stroke:"silver","stroke-width":"4",fill:"transparent","corner-radius":[0,20,20,0]},null,8,["width","height"]),w(h,{width:10,height:t.height,stroke:"silver","stroke-width":"4",fill:"transparent","corner-radius":[0,20,20,0]},null,8,["height"])]),_:1},8,["x","y","rotation","visible","offset"])}}}),z=k({__name:"RestaurantTable",props:{id:{},position:{},rotation:{default:0},diet:{default:"Omnivore"},focus:{type:Boolean,default:!1},tableType:{},chairs:{}},emits:["update:position","update:rotation","focus","dragend","transformend"],setup(e,{expose:t,emit:v}){const r=e,l=v,h=V(null);t({getKonvaNode(){var i;return(i=h.value)==null?void 0:i.getNode()},id:r.id});const m={"square-4":{shape:"rect",width:200,height:200,chairPositions:[{x:0,y:.5,angle:0},{x:.5,y:0,angle:90},{x:1,y:.5,angle:180},{x:.5,y:1,angle:270}]},"square-6":{shape:"rect",width:200,height:100,chairPositions:[{x:0,y:.5,angle:0},{x:.33,y:0,angle:90},{x:.66,y:0,angle:90},{x:1,y:.5,angle:180},{x:.33,y:1,angle:270},{x:.66,y:1,angle:270}]},"circle-4":{shape:"circle",radius:120,chairPositions:[{x:0,y:.5,angle:0},{x:.5,y:0,angle:90},{x:1,y:.5,angle:180},{x:.5,y:1,angle:270}]}},n=g(()=>m[r.tableType]),u=g(()=>n.value.shape),x=g(()=>{switch(r.diet){case"Vegetarian":return"lime";case"Pescatarian":return"red";default:return"transparent"}});g(()=>{const i={outerWidth:60,outerHeight:60};if(u.value==="rect"){const o=n.value.width+2*i.outerWidth/2,c=n.value.height+2*i.outerHeight/2;return{x:-o/2,y:-c/2,width:o,height:c}}else{const o=n.value.radius*2+2*i.outerWidth/2;return{x:-o/2,y:-o/2,width:o,height:o}}});function U(){l("focus",r.id)}function C(i){l("update:position",{x:i.x(),y:i.y()}),l("dragend",i,r.id)}function D(i){l("update:rotation",i.target.rotation()),l("transformend",r.id)}return(i,o)=>{const c=y("v-rect"),S=y("v-circle"),R=y("v-group");return s(),p(R,{ref_key:"tableGroup",ref:h,x:i.position.x,y:i.position.y,rotation:i.rotation,draggable:!0,name:`table-${i.id}`,"data-table-id":i.id,onClick:U,onDragend:o[0]||(o[0]=d=>C(d.target)),onTransformend:D},{default:_(()=>[u.value==="rect"?(s(),p(c,{key:0,x:-(n.value.width/2),y:-(n.value.height/2),width:n.value.width,height:n.value.height,stroke:"silver","stroke-width":"4",fill:x.value},null,8,["x","y","width","height","fill"])):u.value==="circle"?(s(),p(S,{key:1,radius:n.value.radius,stroke:"silver","stroke-width":"4",fill:x.value},null,8,["radius","fill"])):q("",!0),w(c,{width:u.value==="rect"?n.value.width:n.value.radius*2,height:u.value==="rect"?n.value.height:n.value.radius*2,x:u.value==="rect"?-(n.value.width/2):-n.value.radius,y:u.value==="rect"?-(n.value.height/2):-n.value.radius,fill:"blue",opacity:i.focus?.1:0},null,8,["width","height","x","y","opacity"]),(s(!0),I(T,null,B(i.chairs,d=>(s(),p(W,{id:d.id,key:d.id,position:d.position,angle:d.angle,visible:d.visible,"parent-id":i.id},null,8,["id","position","angle","visible","parent-id"]))),128))]),_:1},8,["x","y","rotation","name","data-table-id"])}}});export{z as _,F as v};
