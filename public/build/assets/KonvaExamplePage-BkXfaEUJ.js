import{_ as u}from"./AppLayout.vue_vue_type_script_setup_true_lang-BtxoXEAO.js";import{_ as p}from"./PageContainer.vue_vue_type_script_setup_true_lang-BEBW8e7I.js";import{q as o,c as l,o as s,w as i,b as m,e as w,F as v,h as S,K as x,d as T}from"./app-DmiFfQ2G.js";import{_ as N}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./SecondaryButton.vue_vue_type_script_setup_true_lang-CqX5B3hd.js";import"./TextLink.vue_vue_type_script_setup_true_lang-_a-QFXiR.js";const y=window.innerWidth,k=window.innerHeight,E={data(){return{stageSize:{width:y,height:k},rectangles:[{rotation:0,x:10,y:10,width:100,height:100,scaleX:1,scaleY:1,fill:"red",name:"rect1",draggable:!0},{rotation:0,x:150,y:150,width:100,height:100,scaleX:1,scaleY:1,fill:"green",name:"rect2",draggable:!0}],selectedShapeName:""}},methods:{handleTransformEnd(e){const t=this.rectangles.find(a=>a.name===this.selectedShapeName);t.x=e.target.x(),t.y=e.target.y(),t.rotation=e.target.rotation(),t.scaleX=e.target.scaleX(),t.scaleY=e.target.scaleY(),t.fill=x.Util.getRandomColor()},handleStageMouseDown(e){if(e.target===e.target.getStage()){this.selectedShapeName="",this.updateTransformer();return}if(e.target.getParent().className==="Transformer")return;const a=e.target.name();this.rectangles.find(r=>r.name===a)?this.selectedShapeName=a:this.selectedShapeName="",this.updateTransformer()},updateTransformer(){const e=this.$refs.transformer.getNode(),t=e.getStage(),{selectedShapeName:a}=this,n=t.findOne(`.${a}`);n!==e.node()&&(n?e.nodes([n]):e.nodes([]))}}};function K(e,t,a,n,r,c){const f=o("v-rect"),g=o("v-transformer"),h=o("v-layer"),_=o("v-stage");return s(),l(_,{ref:"stage",config:r.stageSize,onMousedown:c.handleStageMouseDown,onTouchstart:c.handleStageMouseDown},{default:i(()=>[m(h,{ref:"layer"},{default:i(()=>[(s(!0),w(v,null,S(r.rectangles,d=>(s(),l(f,{key:d.id,config:d,onTransformend:c.handleTransformEnd},null,8,["config","onTransformend"]))),128)),m(g,{ref:"transformer"},null,512)]),_:1},512)]),_:1},8,["config","onMousedown","onTouchstart"])}const M=N(E,[["render",K]]),D=T({layout:u,__name:"KonvaExamplePage",setup(e){return(t,a)=>(s(),l(p,{title:"KonvaExample","show-footer":!1},{default:i(()=>[m(M)]),_:1}))}});export{D as default};
