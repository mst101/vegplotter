import{d as K,I as Q,C as w,r as C,e as a,o as l,f as v,b as i,w as t,u as n,g as m,n as p,a as r,c as A,F as x,h as T,t as b,W as X}from"./app-C3xBQ3ZE.js";import{_ as Y}from"./ActionMessage.vue_vue_type_script_setup_true_lang-BLq5yG9i.js";import{_ as j}from"./Modal.vue_vue_type_script_setup_true_lang-BRXft3vj.js";import{_ as L}from"./ConfirmationModal.vue_vue_type_script_setup_true_lang-D7FDOaQl.js";import{_ as P}from"./DangerButton.vue_vue_type_script_setup_true_lang-Dsuv9Wpz.js";import{_ as Z}from"./DialogModal.vue_vue_type_script_setup_true_lang-DlDRQDWc.js";import{_ as ee}from"./FormSection.vue_vue_type_script_setup_true_lang-D_4yUWJk.js";import{_ as se,a as F}from"./TextInput.vue_vue_type_script_setup_true_lang-qYXtQZyR.js";import{_ as V}from"./InputLabel.vue_vue_type_script_setup_true_lang-Bv4fKCVT.js";import{_ as N}from"./PrimaryButton.vue_vue_type_script_setup_true_lang-DV7t34Po.js";import{_ as h}from"./SecondaryButton.vue_vue_type_script_setup_true_lang-Dmu9JfD_.js";import{S}from"./SectionBorder-B6aZ4Kkr.js";const te={key:0},oe={class:"col-span-6 sm:col-span-4"},ne={key:0,class:"col-span-6 lg:col-span-4"},le={class:"relative z-0 mt-1 cursor-pointer rounded-lg border border-gray-200"},re=["onClick"],ae={class:"flex items-center"},ie={key:0,class:"ms-2 size-5 text-green-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},me={class:"mt-2 text-start text-xs text-gray-600"},de={key:1},ue={class:"space-y-6"},ve={class:"text-gray-600"},pe={class:"flex items-center"},ce=["onClick"],fe={key:2},be={class:"space-y-6"},ye={class:"flex items-center"},ge=["src","alt"],ke={class:"ms-4"},_e={class:"flex items-center"},we=["onClick"],Ce={key:1,class:"ms-2 text-sm text-gray-400"},xe=["onClick"],Te={key:0},Re={class:"relative z-0 mt-1 cursor-pointer rounded-lg border border-gray-200"},Me=["onClick"],$e={class:"flex items-center"},he={key:0,class:"ms-2 size-5 text-green-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},Se={class:"mt-2 text-xs text-gray-600"},We=K({__name:"TeamMemberManager",props:{team:{},availableRoles:{},userPermissions:{}},setup(I){const g=I,E=Q(),d=w({email:"",role:null}),c=w({role:null}),R=w({}),M=w({}),k=C(!1),$=C(null),_=C(!1),y=C(null);function O(){d.post(route("team-members.store",[g.team]),{errorBag:"addTeamMember",preserveScroll:!0,onSuccess:()=>d.reset()})}function U(o){X.delete(route("team-invitations.destroy",[o]),{preserveScroll:!0})}function W(o){$.value=o,c.role=o.membership.role,k.value=!0}function D(){c.put(route("team-members.update",[g.team,$.value]),{preserveScroll:!0,onSuccess:()=>k.value=!1})}function q(){_.value=!0}function G(){R.delete(route("team-members.destroy",[g.team,E.props.auth.user]))}function H(o){y.value=o}function J(){M.delete(route("team-members.destroy",[g.team,y.value]),{errorBag:"removeTeamMember",preserveScroll:!0,preserveState:!0,onSuccess:()=>y.value=null})}function z(o){var e;return(e=g.availableRoles.find(s=>s.key===o))==null?void 0:e.name}return(o,e)=>(l(),a("div",null,[o.userPermissions.canAddTeamMembers?(l(),a("div",te,[i(S),i(ee,{onSubmitted:O},{title:t(()=>e[7]||(e[7]=[m(" Add Team Member ")])),description:t(()=>e[8]||(e[8]=[m(" Add a new team member to your team, allowing them to collaborate with you. ")])),form:t(()=>{var s,f;return[e[10]||(e[10]=r("div",{class:"col-span-6"},[r("div",{class:"max-w-xl text-sm text-gray-600"}," Please provide the email address of the person you would like to add to this team. ")],-1)),r("div",oe,[i(V,{for:"email",value:"Email"}),i(se,{id:"email",modelValue:n(d).email,"onUpdate:modelValue":e[0]||(e[0]=u=>n(d).email=u),type:"email",class:"mt-1 block w-full"},null,8,["modelValue"]),(s=n(d).errors)!=null&&s.email?(l(),A(F,{key:0,message:n(d).errors.email,class:"mt-2"},null,8,["message"])):v("",!0)]),o.availableRoles.length>0?(l(),a("div",ne,[i(V,{for:"roles",value:"Role"}),(f=n(d).errors)!=null&&f.role?(l(),A(F,{key:0,message:n(d).errors.role,class:"mt-2"},null,8,["message"])):v("",!0),r("div",le,[(l(!0),a(x,null,T(o.availableRoles,(u,B)=>(l(),a("button",{key:u.key,type:"button",class:p(["relative inline-flex w-full rounded-lg px-4 py-3 focus:z-10 focus:border-green-500 focus:outline-none focus:ring-2 focus:ring-green-500",{"rounded-t-none border-t border-gray-200 focus:border-none":B>0,"rounded-b-none":B!==Object.keys(o.availableRoles).length-1}]),onClick:ze=>n(d).role=u.key},[r("div",{class:p({"opacity-50":n(d).role&&n(d).role!==u.key})},[r("div",ae,[r("div",{class:p(["text-sm text-gray-600",{"font-semibold":n(d).role===u.key}])},b(u.name),3),n(d).role===u.key?(l(),a("svg",ie,e[9]||(e[9]=[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)]))):v("",!0)]),r("div",me,b(u.description),1)],2)],10,re))),128))])])):v("",!0)]}),actions:t(()=>[i(Y,{on:n(d).recentlySuccessful,class:"me-3"},{default:t(()=>e[11]||(e[11]=[m(" Added. ")])),_:1},8,["on"]),i(N,{type:"button",class:p({"opacity-25":n(d).processing}),disabled:n(d).processing},{default:t(()=>e[12]||(e[12]=[m(" Add ")])),_:1},8,["class","disabled"])]),_:1})])):v("",!0),o.team.team_invitations.length>0&&o.userPermissions.canAddTeamMembers?(l(),a("div",de,[i(S),i(j,{class:"mt-10 sm:mt-0"},{title:t(()=>e[13]||(e[13]=[m(" Pending Team Invitations ")])),description:t(()=>e[14]||(e[14]=[m(" These people have been invited to your team and have been sent an invitation email. They may join the team by accepting the email invitation. ")])),content:t(()=>[r("div",ue,[(l(!0),a(x,null,T(o.team.team_invitations,s=>(l(),a("div",{key:s.id,class:"flex items-center justify-between"},[r("div",ve,b(s.email),1),r("div",pe,[o.userPermissions.canRemoveTeamMembers?(l(),a("button",{key:0,class:"ms-6 cursor-pointer text-sm text-red-500 focus:outline-none",onClick:f=>U(s)}," Cancel ",8,ce)):v("",!0)])]))),128))])]),_:1})])):v("",!0),o.team.users.length>0?(l(),a("div",fe,[i(S),i(j,{class:"mt-10 sm:mt-0"},{title:t(()=>e[15]||(e[15]=[m(" Team Members ")])),description:t(()=>e[16]||(e[16]=[m(" All of the people that are part of this team. ")])),content:t(()=>[r("div",be,[(l(!0),a(x,null,T(o.team.users,s=>{var f;return l(),a("div",{key:s.id,class:"flex items-center justify-between"},[r("div",ye,[r("img",{class:"size-8 rounded-full object-cover",src:s.profile_photo_url,alt:s.name},null,8,ge),r("div",ke,b(s.name),1)]),r("div",_e,[o.userPermissions.canUpdateTeamMembers&&o.availableRoles.length?(l(),a("button",{key:0,class:"ms-2 text-sm text-gray-400 underline",onClick:u=>W(s)},b(z(s.membership.role)),9,we)):o.availableRoles.length?(l(),a("div",Ce,b(z(s.membership.role)),1)):v("",!0),((f=o.$page.props.auth.user)==null?void 0:f.id)===s.id?(l(),a("button",{key:2,class:"ms-6 cursor-pointer text-sm text-red-500",onClick:q}," Leave ")):o.userPermissions.canRemoveTeamMembers?(l(),a("button",{key:3,class:"ms-6 cursor-pointer text-sm text-red-500",onClick:u=>H(s)}," Remove ",8,xe)):v("",!0)])])}),128))])]),_:1})])):v("",!0),i(Z,{show:k.value,onClose:e[2]||(e[2]=s=>k.value=!1)},{title:t(()=>e[17]||(e[17]=[m(" Manage Role ")])),content:t(()=>[$.value?(l(),a("div",Te,[r("div",Re,[(l(!0),a(x,null,T(o.availableRoles,(s,f)=>(l(),a("button",{key:s.key,type:"button",class:p(["relative inline-flex w-full rounded-lg px-4 py-3 focus:z-10 focus:border-green-500 focus:outline-none focus:ring-2 focus:ring-green-500",{"rounded-t-none border-t border-gray-200 focus:border-none":f>0,"rounded-b-none":f!==Object.keys(o.availableRoles).length-1}]),onClick:u=>n(c).role=s.key},[r("div",{class:p({"opacity-50":n(c).role&&n(c).role!==s.key})},[r("div",$e,[r("div",{class:p(["text-sm text-gray-600",{"font-semibold":n(c).role===s.key}])},b(s.name),3),n(c).role===s.key?(l(),a("svg",he,e[18]||(e[18]=[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)]))):v("",!0)]),r("div",Se,b(s.description),1)],2)],10,Me))),128))])])):v("",!0)]),footer:t(()=>[i(h,{type:"button",onClick:e[1]||(e[1]=s=>k.value=!1)},{default:t(()=>e[19]||(e[19]=[m(" Cancel ")])),_:1}),i(N,{type:"button",class:p(["ms-3",{"opacity-25":n(c).processing}]),disabled:n(c).processing,onClick:D},{default:t(()=>e[20]||(e[20]=[m(" Save ")])),_:1},8,["class","disabled"])]),_:1},8,["show"]),i(L,{show:_.value,onClose:e[4]||(e[4]=s=>_.value=!1)},{title:t(()=>e[21]||(e[21]=[m(" Leave Team ")])),content:t(()=>e[22]||(e[22]=[m(" Are you sure you would like to leave this team? ")])),footer:t(()=>[i(h,{type:"button",onClick:e[3]||(e[3]=s=>_.value=!1)},{default:t(()=>e[23]||(e[23]=[m(" Cancel ")])),_:1}),i(P,{type:"button",class:p(["ms-3",{"opacity-25":n(R).processing}]),disabled:n(R).processing,onClick:G},{default:t(()=>e[24]||(e[24]=[m(" Leave ")])),_:1},8,["class","disabled"])]),_:1},8,["show"]),i(L,{show:!!y.value,onClose:e[6]||(e[6]=s=>y.value=null)},{title:t(()=>e[25]||(e[25]=[m(" Remove Team Member ")])),content:t(()=>e[26]||(e[26]=[m(" Are you sure you would like to remove this person from the team? ")])),footer:t(()=>[i(h,{type:"button",onClick:e[5]||(e[5]=s=>y.value=null)},{default:t(()=>e[27]||(e[27]=[m(" Cancel ")])),_:1}),i(P,{type:"button",class:p(["ms-3",{"opacity-25":n(M).processing}]),disabled:n(M).processing,onClick:J},{default:t(()=>e[28]||(e[28]=[m(" Remove ")])),_:1},8,["class","disabled"])]),_:1},8,["show"])]))}});export{We as _};
